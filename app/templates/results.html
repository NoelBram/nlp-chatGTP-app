{% extends "base.html" %}

{% block content %}
<div id="ck-div" contenteditable="true">
    <textarea id="input-text" type="text" rows="10" placeholder="Enter your text here or paste text (CTRL + V)">{{ response }}</textarea>
    <button id="copy-button" onclick="copyText()">COPY</button>
    <button id="reword-button" onclick="rewordText()">Reword with chatGTP</button>
</div>

{% endblock %}

{% block scripts %}
<script>
    function rewordText() {
        var input = document.getElementById("input-text").value;
        document.getElementById("input-text").placeholder = "Rewrite/Rewording the following text while retaining its meaning and message...";
        document.getElementById("input-text").value = "";
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "{{ url_for('index') }}");
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.onload = function() {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText).response;
                document.getElementById("input-text").value = response;
                document.getElementById("input-text").placeholder = "Enter your text here or paste text (CTRL + V)";
            }
        };
        xhr.send(JSON.stringify({input_text: input}));
    }
    function copyText() {
        var textArea = document.getElementById("input-text");
        textArea.select();
        document.execCommand("copy");
    }

</script>
{% endblock %}
